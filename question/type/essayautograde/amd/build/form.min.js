define ("qtype_essayautograde/form",["jquery"],function(a){var b={sizewidths:[]};b.init=function(){b.init_responseformat();b.init_target_phrases();b.init_add_button("addbands","id_gradebands");b.init_add_button("addphrases","id_targetphrases")};b.init_responseformat=function(){var b=document.querySelector("select[name=responseformat]");a(b).change(function(){var a=this.options[this.selectedIndex].value,b=this.options[this.selectedIndex].innerText,c=0;if("plain"==a||"monospaced"==a){c=2}else if("editor"==a||"editorfilepicker"==a){c=1}["responsetemplate","responsesample"].forEach(function(a){var d=document.querySelector("[name='"+a+"[format]']");if(d){if(d.matches("select")){for(var e=0;e<d.options.length;e++){if(d.options[e].value==c){d.options[e].selected=!0}}}else if(d.matches("input[type=hidden]")){d.value=c}}var f=document.querySelector("[name='"+a+"[text]']");if(f){var g=null,h=null,j=f.previousElementSibling;if(j&&j.matches(".editor_atto")){g=j;h=g.querySelector("#id_"+a+"editable")}var j=f.nextElementSibling;if(j&&j.matches("#id_"+a+"_parent")){g=j;j=g.querySelector("#id_"+a+"_ifr");if(j){j=j.contentWindow||j.contentDocument;if(j.document){j=j.document}h=j.body}}if(g){if(0==c||1==c){f.hidden=!0;f.style.display="none"}else{f.hidden=!1;f.style.display="";if(h){f.value=h.innerText}}if(0==c||2==c){g.hidden=!0;g.style.display="none";j=g.parentNode.querySelector(".editor_atto_notification");if(j){j.hidden=!0;j.style.display="none"}}else{g.hidden=!1;g.style.display="";if(h){h.innerHTML=f.value}}var k=f.parentNode.querySelector("#noinline-message");if(0==c){if(k){k.hidden=!1;k.style.display=""}else{k=document.createElement("DIV");k.setAttribute("id","noinline-message");k.appendChild(document.createTextNode(b));f.parentNode.appendChild(k)}}else if(k){k.hidden=!0;k.style.display="none"}}}})})};b.init_target_phrases=function(){a("input[id^=id_phrasematch_]").each(function(){a(this).keyup(function(){var c=0,d=a(this).attr("size");if(d){if(d in b.sizewidths){c=b.sizewidths[d]}else{var e=document.createElement("INPUT");a(e).attr("size",d);a(e).css("width","auto");a(e).hide().appendTo("BODY");c=a(e).outerWidth();a(e).remove();b.sizewidths[d]=c}}var f=document.createTextNode(a(this).val()),e=document.createElement("SPAN");a(e).append(f).hide().appendTo("BODY");var g=Math.max(a(e).width(),c);a(e).remove();a(this).width(g)});a(this).triggerHandler("keyup")})};b.init_add_button=function(b,c){a("input[name="+b+"]").click(function(){var b=a(this).closest("form").prop("action");b=b.replace(/#.*$/,"");a(this).closest("form").prop("action",b+"#"+c)})};return b});
//# sourceMappingURL=form.min.js.map
