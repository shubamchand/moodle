{"version":3,"sources":["format_list.js"],"names":["define","$","init","addClass","css","opacity","visibility","animate","M","course","format","get_config","container_node","container_class","section_node","section_class","swap_sections","Y","node1","node2","CSS","sectionlist","Node","all","get_section_selector","item","one","swap","process_sections","response","sectionfrom","sectionto","SELECTORS","action","temp","ele","str","stridx","newstr","i","content","create","sectiontitles","setHTML","getAttribute","lastIndexOf","substr","setAttribute"],"mappings":"AAuBCA,OAAO,CAAC,UAAW,SAASC,GAiGzB,MAAO,CACHC,KAhGJ,WAEID,EAAE,8DAA8DE,SAAS,mBACzEF,EAAE,wBAAwBG,IAAI,CAACC,QAAS,EAAKC,WAAY,YAAaC,QAAQ,CAACF,QAAS,GAAO,IAAK,SACpGJ,EAAE,gBAAgBG,IAAI,CAACC,QAAS,EAAKC,WAAY,YAAaC,QAAQ,CAACF,QAAS,GAAO,IAAK,SAE5FG,EAAEC,OAASD,EAAEC,QAAU,GAEvBD,EAAEC,OAAOC,OAASF,EAAEC,OAAOC,QAAU,GAcrCF,EAAEC,OAAOC,OAAOC,WAAa,WACzB,MAAO,CACHC,eAAgB,KAChBC,gBAAiB,oBACjBC,aAAc,KACdC,cAAe,YAYvBP,EAAEC,OAAOC,OAAOM,cAAgB,SAASC,EAAGC,EAAOC,GAC/C,IAAIC,EACe,iBADfA,EAEiB,oBAGjBC,EAAcJ,EAAEK,KAAKC,IAAI,IAAMH,EAAoB,IAAMZ,EAAEC,OAAOC,OAAOc,qBAAqBP,IAElGI,EAAYI,KAAKP,GAAOQ,IAAI,IAAMN,GAAqBO,KAAKN,EAAYI,KAAKN,GAAOO,IAAI,IAAMN,KAYlGZ,EAAEC,OAAOC,OAAOkB,iBAAmB,SAASX,EAAGI,EAAaQ,EAAUC,EAAaC,GAC/E,IAAIX,EACa,cAEjBY,EACqB,8BAErB,GAAuB,QAAnBH,EAASI,OAAkB,CAE3B,GAAIH,EAAcC,EAAW,CACzB,IAAIG,EAAOH,EACXA,EAAYD,EACZA,EAAcI,EAMlB,IAFA,IAAIC,EAAKC,EAAKC,EAAQC,EAEbC,EAAIT,EAAaS,GAAKR,EAAWQ,IAAK,CAE3C,IAAIC,EAAUvB,EAAEK,KAAKmB,OAAOZ,EAASa,cAAcH,IACnDlB,EAAYI,KAAKc,GAAGhB,IAAI,MAAQH,GAAiBuB,QAAQH,GAIzDH,GADAD,GADAD,EAAMd,EAAYI,KAAKc,GAAGb,IAAIM,IACpBY,aAAa,QACVC,YAAY,KACzBP,EAASF,EAAIU,OAAO,EAAGT,EAAS,GAAKE,EACrCJ,EAAIY,aAAa,MAAOT,GACxBH,EAAIY,aAAa,QAAST","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Enhancements to Lists components for easy course accessibility.\n *\n * @module     format/remuiformat\n * @copyright  WisdmLabs\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery'], function($) {\n\n    function init() {\n\n        $('#page-course-view-remuiformat span.section-modchooser-link').addClass(\"btn btn-primary\");\n        $('.general-single-card').css({opacity: 0.0, visibility: \"visible\",}).animate({opacity: 1.0,}, 200, \"swing\");\n        $('.single-card').css({opacity: 0.0, visibility: \"visible\",}).animate({opacity: 1.0,}, 400, \"swing\");\n\n        M.course = M.course || {};\n\n        M.course.format = M.course.format || {};\n\n        /**\n         * Get sections config for this format\n         *\n         * The section structure is:\n         * <ul class=\"remui-format-list\">\n         *  <li class=\"section\">...</li>\n         *  <li class=\"section\">...</li>\n         *   ...\n         * </ul>\n         *\n         * @return {object} section list configuration\n         */\n        M.course.format.get_config = function() {\n            return {\n                container_node: 'ul',\n                container_class: 'remui-format-list',\n                section_node: 'li',\n                section_class: 'section'\n            };\n        };\n\n        /**\n         * Swap section\n         *\n         * @param {YUI} Y YUI3 instance\n         * @param {string} node1 node to swap to\n         * @param {string} node2 node to swap with\n         * @return {NodeList} section list\n         */\n        M.course.format.swap_sections = function(Y, node1, node2) {\n            var CSS = {\n                COURSECONTENT: 'course-content',\n                SECTIONADDMENUS: 'section_add_menus'\n            };\n\n            var sectionlist = Y.Node.all('.' + CSS.COURSECONTENT + ' ' + M.course.format.get_section_selector(Y));\n            // Swap menus.\n            sectionlist.item(node1).one('.' + CSS.SECTIONADDMENUS).swap(sectionlist.item(node2).one('.' + CSS.SECTIONADDMENUS));\n        };\n\n        /**\n         * Process sections after ajax response\n         *\n         * @param {YUI} Y YUI3 instance\n         * @param {array} response ajax response\n         * @param {string} sectionfrom first affected section\n         * @param {string} sectionto last affected section\n         * @return void\n         */\n        M.course.format.process_sections = function(Y, sectionlist, response, sectionfrom, sectionto) {\n            var CSS = {\n                SECTIONNAME: 'sectionname'\n            },\n            SELECTORS = {\n                SECTIONLEFTSIDE: '.left .section-handle .icon'\n            };\n            if (response.action == 'move') {\n                // If moving up swap around 'sectionfrom' and 'sectionto' so the that loop operates.\n                if (sectionfrom > sectionto) {\n                    var temp = sectionto;\n                    sectionto = sectionfrom;\n                    sectionfrom = temp;\n                }\n\n                // Update titles and move icons in all affected sections.\n                var ele, str, stridx, newstr;\n\n                for (var i = sectionfrom; i <= sectionto; i++) {\n                    // Update section title.\n                    var content = Y.Node.create(response.sectiontitles[i]);\n                    sectionlist.item(i).all('h4.' + CSS.SECTIONNAME).setHTML(content);\n                    // Update move icon.\n                    ele = sectionlist.item(i).one(SELECTORS.SECTIONLEFTSIDE);\n                    str = ele.getAttribute('alt');\n                    stridx = str.lastIndexOf(' ');\n                    newstr = str.substr(0, stridx + 1) + i;\n                    ele.setAttribute('alt', newstr);\n                    ele.setAttribute('title', newstr); // For FireFox as 'alt' is not refreshed.\n                }\n            }\n        };\n    }\n\n    // Must return the init function.\n\n    return {\n        init: init\n        };\n });"],"file":"format_list.min.js"}