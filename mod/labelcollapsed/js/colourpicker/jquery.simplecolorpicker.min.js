const SimpleColorPicker=function(e,o){this.$el=$(e),this.options=o,this.metadata=this.$el.data("options")};SimpleColorPicker.prototype={defaults:{defaultColor:{name:"default (white)",hex:"fff"},borderWidth:1,cellWidth:20,cellHeight:20,cellBorder:1,elWidth:25,elHeight:25,cols:8,colors:[{name:"green",hex:"00aa00"},{name:"red",hex:"cc0000"},{name:"aqua",hex:"039799"},{name:"pink",hex:"b0307a"},{name:"purple",hex:"762ca7"},{name:"orange",hex:"cc6600"},{name:"gray",hex:"555555"},{name:"black",hex:"000000"},{name:"blue",hex:"0000dd"},{name:"white",hex:"ffffff"},{name:"LU secondry 1",hex:"557869"},{name:"LU secondry 2",hex:"869978"},{name:"LU secondry 3",hex:"e3cb8b"},{name:"LU secondry 4",hex:"e1ab6c"},{name:"LU secondry 5",hex:"008375"},{name:"LU secondry 6",hex:"75BF9A"},{name:"LU secondry 7",hex:"64606c"},{name:"LU secondry 8",hex:"c26763"},{name:"LU secondry 9",hex:"48B6AD"},{name:"LU secondry 10",hex:"81B8BB"},{name:"LU secondry 11",hex:"FF7372"},{name:"LU secondry 12",hex:"F9A98E"},{name:"LU secondry 13",hex:"006382"},{name:"LU secondry 14",hex:"C4DAE5"},{name:"LU secondry 15",hex:"8A3E65"},{name:"LU secondry 16",hex:"A4769A"},{name:"LU secondry 17",hex:"324147"},{name:"LU secondry 18",hex:"7faabe"},{name:"LU secondry 19",hex:"bab6a2"},{name:"LU Red",hex:"b5121b"},{name:"LU Grey",hex:"bec0c2"},{name:"LU Dark Grey",hex:"555656"},{name:"MM a",hex:"008080"},{name:"MM b",hex:"D35400"},{name:"MM c",hex:"145A32"},{name:"MM d",hex:"5D6D7E"},{name:"MM e",hex:"006382"},{name:"MM f",hex:"B03A2E"},{name:"MM g",hex:"ff0000"}],iconPos:"right",aniSpeed:50,lsClass:"color-picker-chooser",textCurrentColor:"Current color: "},init(){const e=this;return e.config=$.extend(!0,{},e.defaults,e.options,e.metadata),e.config.totalWidth=e.config.cols*(e.config.cellWidth+2*e.config.cellBorder),e.config.totalHeight=Math.ceil(e.config.colors.length/e.config.cols)*(e.config.cellHeight+2*e.config.cellBorder),e.setupInputElement(),e.$cp=e.getPickerMenu(),$("body").append(e.$cp),e.bindPickerEvents(),$(window).resize(()=>{e.setPickerPosition(e.$cp)}),e},geticonPos(){let e;switch(this.config.iconPos){case"center":e="center";break;case"left":e="4px center";break;case"right":default:e=`${this.config.elWidth-20}px`}return e},setupInputElement(){const e=this;const o=e.$el.attr("name").substring(0,2);let s;"fr"==o?(s=""!=$("#id_sectioncolor").val()?$("#id_sectioncolor").val():"#000000",e.$el.css({backgroundColor:s,backgroundPosition:e.geticonPos(),borderWidth:`${e.config.borderWidth}px`,width:`${e.config.elWidth}px`,height:`${e.config.elHeight}px`,color:`#${e.$el.val()}`})):"bg"==o&&(s=""!=$("#id_sectionbgcolor").val()?$("#id_sectionbgcolor").val():"#ffffff",e.$el.css({backgroundColor:s,backgroundPosition:e.geticonPos(),borderWidth:`${e.config.borderWidth}px`,width:`${e.config.elWidth}px`,height:`${e.config.elHeight}px`,color:`#${e.$el.val()}`}))},close(){this.$cp.slideUp(this.config.aniSpeed).find("li").removeClass("selected"),this.$el.removeClass("open").focus(),$(document).off(`mouseup.cp${this.colorPickerInstance}`,"html")},open(){const e=this;e.setPickerPosition(e.$cp),e.$el.addClass("open"),e.$cp.slideDown(e.config.aniSpeed),$(document).on(`mouseup.cp${e.colorPickerInstance}`,"html",()=>{e.close.call(e)})},setPickerPosition(e){const o=this.$el.offset(),s=this.$el.height();e.css({top:o.top+s+this.config.borderWidth,left:o.left})},getCells(){const e=this,o=e.config.colors.length,s=$("<div/>");let c,n;for(c=0;c<o;c++)(n=$(`<li tabindex='0' title='${e.config.colors[c].name}' data-color='${e.config.colors[c].hex}'></li>`)).css({width:`${e.config.cellWidth}px`,height:`${e.config.cellHeight}px`,borderWidth:`${e.config.cellBorder}px`,backgroundColor:`#${e.config.colors[c].hex}`}),s.append(n);return s},getPickerMenu(){const e=this;e.colorPickerInstance=$(`.${e.config.lsClass}`).length+1;const o=$(`<ul class='${e.config.lsClass}' id='cp-${e.colorPickerInstance}' />`);let s;return e.setPickerPosition(o),o.css({borderWidth:`${e.config.borderWidth}px`,width:"324px",display:"none"}),s=e.getCells(),o.append(s.children()),o},bindPickerEvents(){const e=this,o=e.$cp.find("li");e.$el.bind({mouseup(o){e.$cp.is(":visible")?e.close():e.open(),o.stopPropagation()},keydown(o){switch(o.which){case 13:e.$el.trigger("mouseup");break;case 27:e.close(),o.stopPropagation();break;case 40:e.open(),e.$cp.find("li:first").focus().addClass("selected");break;case 9:e.$cp.is(":visible")&&(e.$cp.find("li:first").focus().addClass("selected"),o.preventDefault())}}}),o.bind({keydown(o){const s=$(this),c=s.siblings().addBack();switch(o.which){case 13:s.trigger("mouseup");break;case 27:s.removeClass("selected"),e.close(),o.stopPropagation();break;case 37:0===s.prevAll().length?s.removeClass("selected").siblings(":last").focus().addClass("selected"):s.removeClass("selected").prev().focus().addClass("selected");break;case 38:var n=c.index(s)-e.config.cols;n>-1?(s.removeClass("selected"),$(c[n]).addClass("selected").focus()):(s.removeClass("selected"),e.close());break;case 39:case 9:0===s.nextAll().length?s.removeClass("selected").siblings(":first").focus().addClass("selected"):s.removeClass("selected").next().focus().addClass("selected");break;case 40:var t=c.index(s)+e.config.cols;t<c.length&&(s.removeClass("selected"),$(c[t]).addClass("selected").focus())}return!1},mouseup(o){const s=$(this);s.siblings().addBack().removeClass("selected");const c=s.attr("data-color"),n=s.attr("title");e.$el.val(c).removeClass("open").focus().css({backgroundColor:`#${c}`,color:`#${c}`}).attr({title:e.config.textCurrentColor+n,value:`#${c}`});const t=e.$el.attr("name").substring(0,2);return"fr"==t?$("#id_sectioncolor").val(`#${c}`):"bg"==t&&$("#id_sectionbgcolor").val(`#${c}`),e.close(),o.stopPropagation(),!1}})}},$.fn.simpleColorPicker=function(e){return this.each(function(){new SimpleColorPicker(this,e).init()})};
